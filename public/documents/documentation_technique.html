<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Documentation Technique - AJE Tchad</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: #f5f5f5;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            background: white;
            padding: 40px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }

        .header {
            text-align: center;
            border-bottom: 4px solid #0F766E;
            padding-bottom: 20px;
            margin-bottom: 30px;
        }

        .header h1 {
            color: #0F766E;
            font-size: 2.5em;
            margin-bottom: 10px;
        }

        .header p {
            color: #666;
            font-size: 1.1em;
        }

        h2 {
            color: #0F766E;
            font-size: 1.8em;
            margin-top: 30px;
            margin-bottom: 15px;
            border-left: 5px solid #0F766E;
            padding-left: 15px;
        }

        h3 {
            color: #14B8A6;
            font-size: 1.4em;
            margin-top: 20px;
            margin-bottom: 10px;
        }

        h4 {
            color: #2DD4BF;
            font-size: 1.2em;
            margin-top: 15px;
            margin-bottom: 8px;
        }

        p {
            margin-bottom: 12px;
            text-align: justify;
        }

        ul, ol {
            margin-left: 30px;
            margin-bottom: 15px;
        }

        li {
            margin-bottom: 8px;
        }

        .section {
            margin-bottom: 30px;
            page-break-inside: avoid;
        }

        .tech-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }

        .tech-card {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            border-left: 3px solid #14B8A6;
        }

        .tech-card h4 {
            margin-top: 0;
        }

        code {
            background: #f4f4f4;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
        }

        pre {
            background: #2d2d2d;
            color: #f8f8f8;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
            margin: 15px 0;
        }

        pre code {
            background: transparent;
            padding: 0;
            color: #f8f8f8;
        }

        .table-responsive {
            overflow-x: auto;
            margin: 20px 0;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
        }

        th, td {
            border: 1px solid #ddd;
            padding: 12px;
            text-align: left;
        }

        th {
            background-color: #0F766E;
            color: white;
        }

        tr:nth-child(even) {
            background-color: #f9f9f9;
        }

        .highlight {
            background-color: #FEF3C7;
            padding: 15px;
            border-left: 4px solid #F59E0B;
            margin: 20px 0;
        }

        .footer {
            text-align: center;
            margin-top: 40px;
            padding-top: 20px;
            border-top: 2px solid #e0e0e0;
            color: #666;
            font-size: 0.9em;
        }

        .no-print {
            margin: 20px 0;
            text-align: center;
        }

        .print-button {
            background: #0F766E;
            color: white;
            padding: 12px 30px;
            border: none;
            border-radius: 5px;
            font-size: 1.1em;
            cursor: pointer;
            transition: background 0.3s;
        }

        .print-button:hover {
            background: #14B8A6;
        }

        .print-button:disabled {
            background: #ccc;
            cursor: not-allowed;
        }

        .loading-spinner {
            display: inline-block;
            width: 16px;
            height: 16px;
            border: 2px solid rgba(255,255,255,0.3);
            border-radius: 50%;
            border-top-color: white;
            animation: spin 0.6s linear infinite;
            margin-left: 8px;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        @media print {
            body {
                background: white;
                padding: 0;
            }

            .container {
                box-shadow: none;
                padding: 20px;
            }

            .no-print {
                display: none;
            }

            .section {
                page-break-inside: avoid;
            }

            h2 {
                page-break-after: avoid;
            }
        }

        @media (max-width: 768px) {
            .container {
                padding: 20px;
            }

            .header h1 {
                font-size: 1.8em;
            }

            h2 {
                font-size: 1.4em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="no-print">
            <button class="print-button" onclick="handlePrint()">
                <span class="button-text">üìÑ T√©l√©charger en PDF</span>
            </button>
        </div>

        <div class="header">
            <h1>Documentation Technique</h1>
            <p>Site Web AJE Tchad</p>
            <p style="margin-top: 10px;"><strong>Version 1.0.0 | 2025</strong></p>
        </div>

        <div class="section">
            <h2>1. PR√âSENTATION DU PROJET</h2>
            
            <h3>1.1 Description</h3>
            <p>Site web officiel de l'Agence Judiciaire de l'√âtat du Tchad, plateforme compl√®te pour la gestion des services juridiques, du contentieux, et de la communication institutionnelle.</p>
            
            <h3>1.2 URL de Production</h3>
            <ul>
                <li><strong>Domaine principal:</strong> <code>https://ajetchadgouv.com</code></li>
                <li><strong>H√©bergement:</strong> Vercel</li>
            </ul>
        </div>

        <div class="section">
            <h2>2. TECHNOLOGIES UTILIS√âES</h2>
            
            <h3>2.1 Frontend</h3>
            
            <div class="tech-grid">
                <div class="tech-card">
                    <h4>Framework et Langage</h4>
                    <ul>
                        <li><strong>React 18.3.1</strong> - Biblioth√®que JavaScript pour interfaces utilisateur</li>
                        <li><strong>TypeScript</strong> - Superset typ√© de JavaScript</li>
                        <li><strong>Vite</strong> - Build tool moderne et rapide</li>
                    </ul>
                </div>

                <div class="tech-card">
                    <h4>Styles et Interface</h4>
                    <ul>
                        <li><strong>Tailwind CSS</strong> - Framework CSS utility-first</li>
                        <li><strong>Shadcn/ui</strong> - Composants UI r√©utilisables</li>
                        <li><strong>Radix UI</strong> - Primitives UI accessibles</li>
                        <li><strong>Lucide React 0.462.0</strong> - Ic√¥nes</li>
                    </ul>
                </div>

                <div class="tech-card">
                    <h4>Routing</h4>
                    <ul>
                        <li><strong>React Router DOM 6.30.1</strong> - Routage c√¥t√© client</li>
                    </ul>
                </div>

                <div class="tech-card">
                    <h4>Gestion d'√âtat</h4>
                    <ul>
                        <li><strong>TanStack React Query 5.83.0</strong> - Requ√™tes et cache</li>
                        <li><strong>React Hook Form 7.61.1</strong> - Formulaires</li>
                        <li><strong>Zod 3.25.76</strong> - Validation de sch√©mas</li>
                    </ul>
                </div>

                <div class="tech-card">
                    <h4>Cartes et G√©olocalisation</h4>
                    <ul>
                        <li><strong>Mapbox GL 3.15.0</strong> - Cartes interactives</li>
                    </ul>
                </div>

                <div class="tech-card">
                    <h4>G√©n√©ration de Documents</h4>
                    <ul>
                        <li><strong>jsPDF 3.0.3</strong> - G√©n√©ration de PDF</li>
                        <li><strong>DOMPurify 3.3.0</strong> - S√©curit√© HTML</li>
                    </ul>
                </div>

                <div class="tech-card">
                    <h4>Visualisation de Donn√©es</h4>
                    <ul>
                        <li><strong>Recharts 2.15.4</strong> - Graphiques</li>
                    </ul>
                </div>

                <div class="tech-card">
                    <h4>Autres Biblioth√®ques</h4>
                    <ul>
                        <li><strong>date-fns 3.6.0</strong> - Dates</li>
                        <li><strong>embla-carousel 8.6.0</strong> - Carrousels</li>
                        <li><strong>sonner 1.7.4</strong> - Notifications</li>
                    </ul>
                </div>
            </div>

            <h3>2.2 Backend</h3>
            
            <h4>Infrastructure</h4>
            <ul>
                <li><strong>Supabase</strong> - Backend as a Service (BaaS)
                    <ul>
                        <li>Base de donn√©es PostgreSQL</li>
                        <li>Authentification utilisateurs</li>
                        <li>Stockage de fichiers (Storage)</li>
                        <li>Edge Functions (Deno)</li>
                        <li>API REST auto-g√©n√©r√©e</li>
                    </ul>
                </li>
            </ul>

            <h4>Edge Functions (Serverless)</h4>
            <ul>
                <li><strong>Deno</strong> - Runtime JavaScript/TypeScript</li>
                <li><code>convert-html-to-pdf</code> - Conversion de documents</li>
                <li><code>setup-backend</code> - Configuration backend</li>
            </ul>

            <h3>2.3 Base de Donn√©es</h3>
            
            <h4>Syst√®me</h4>
            <p><strong>PostgreSQL</strong> (via Supabase)</p>

            <h4>Tables Principales</h4>
            <div class="table-responsive">
                <table>
                    <thead>
                        <tr>
                            <th>Table</th>
                            <th>Description</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr><td><code>actualites</code></td><td>Actualit√©s et communiqu√©s</td></tr>
                        <tr><td><code>textes_juridiques</code></td><td>Textes de loi</td></tr>
                        <tr><td><code>jurisprudences</code></td><td>D√©cisions de justice</td></tr>
                        <tr><td><code>services_juridiques</code></td><td>Services offerts</td></tr>
                        <tr><td><code>documents</code></td><td>Documents officiels</td></tr>
                        <tr><td><code>resource_documents</code></td><td>Mod√®les de formulaires</td></tr>
                        <tr><td><code>faq</code></td><td>Questions fr√©quentes</td></tr>
                        <tr><td><code>faq_assistance</code></td><td>FAQ assistance</td></tr>
                        <tr><td><code>domaines_contentieux</code></td><td>Domaines juridiques</td></tr>
                        <tr><td><code>procedures_contentieux</code></td><td>Proc√©dures contentieuses</td></tr>
                        <tr><td><code>statistiques_contentieux</code></td><td>Statistiques</td></tr>
                        <tr><td><code>demandes_avis</code></td><td>Demandes d'avis juridiques</td></tr>
                        <tr><td><code>brouillons_avis</code></td><td>Brouillons de demandes</td></tr>
                        <tr><td><code>contacts</code></td><td>Messages de contact</td></tr>
                        <tr><td><code>job_offers</code></td><td>Offres d'emploi</td></tr>
                        <tr><td><code>job_applications</code></td><td>Candidatures</td></tr>
                        <tr><td><code>media_press_releases</code></td><td>Communiqu√©s de presse</td></tr>
                        <tr><td><code>media_gallery</code></td><td>Galerie m√©dia</td></tr>
                        <tr><td><code>media_accreditations</code></td><td>Accr√©ditations presse</td></tr>
                        <tr><td><code>media_press_contacts</code></td><td>Contacts presse</td></tr>
                        <tr><td><code>media_kits</code></td><td>Kits m√©dia</td></tr>
                        <tr><td><code>newsletter_subscriptions</code></td><td>Abonnements newsletter</td></tr>
                        <tr><td><code>site_settings</code></td><td>Param√®tres du site</td></tr>
                        <tr><td><code>profiles</code></td><td>Profils utilisateurs</td></tr>
                        <tr><td><code>user_roles</code></td><td>R√¥les utilisateurs</td></tr>
                    </tbody>
                </table>
            </div>

            <h4>Fonctionnalit√©s Base de Donn√©es</h4>
            <ul>
                <li>Row Level Security (RLS) activ√©</li>
                <li>Triggers automatiques</li>
                <li>Fonctions personnalis√©es</li>
                <li>Politique de s√©curit√© stricte</li>
            </ul>

            <h3>2.4 Stockage de Fichiers</h3>
            
            <h4>Buckets Supabase Storage</h4>
            <ul>
                <li><code>actualites-media</code> - M√©dias des actualit√©s (public)</li>
                <li><code>director-photos</code> - Photos des directeurs (public)</li>
                <li><code>documents-files</code> - Documents officiels (public)</li>
                <li><code>textes-juridiques-files</code> - Fichiers de textes juridiques (public)</li>
                <li><code>media-files</code> - Fichiers m√©dia (public)</li>
                <li><code>make-e892ec19-listings</code> - Listings (priv√©)</li>
            </ul>

            <h3>2.5 Authentification</h3>
            <ul>
                <li><strong>Supabase Auth</strong> - Syst√®me d'authentification</li>
                <li>Email/Password</li>
                <li>Gestion des sessions</li>
                <li>Syst√®me de r√¥les (admin, utilisateur)</li>
            </ul>

            <h3>2.6 D√©ploiement et H√©bergement</h3>
            <ul>
                <li><strong>Vercel</strong> - Plateforme de d√©ploiement</li>
                <li><strong>GitHub</strong> - Contr√¥le de version (optionnel)</li>
                <li>CI/CD automatique</li>
                <li>SSL/HTTPS automatique</li>
                <li>Domaine personnalis√©: ajetchadgouv.com</li>
            </ul>
        </div>

        <div class="section">
            <h2>3. ARCHITECTURE DE L'APPLICATION</h2>
            
            <h3>3.1 Structure des Dossiers</h3>
            <pre><code>/
‚îú‚îÄ‚îÄ public/                    # Fichiers statiques
‚îÇ   ‚îú‚îÄ‚îÄ documents/            # Documents PDF et HTML
‚îÇ   ‚îî‚îÄ‚îÄ lovable-uploads/      # Uploads
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ assets/               # Images et logos
‚îÇ   ‚îú‚îÄ‚îÄ components/           # Composants React
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ admin/           # Composants administration
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ home/            # Composants page d'accueil
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ layout/          # Layout (Header, Footer)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ui/              # Composants UI Shadcn
‚îÇ   ‚îú‚îÄ‚îÄ contexts/            # Contexts React (Auth, Language)
‚îÇ   ‚îú‚îÄ‚îÄ hooks/               # Custom hooks
‚îÇ   ‚îú‚îÄ‚îÄ integrations/        # Int√©grations externes
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ supabase/        # Configuration Supabase
‚îÇ   ‚îú‚îÄ‚îÄ lib/                 # Utilitaires
‚îÇ   ‚îú‚îÄ‚îÄ locales/             # Traductions (FR, AR, EN)
‚îÇ   ‚îú‚îÄ‚îÄ pages/               # Pages de l'application
‚îÇ   ‚îú‚îÄ‚îÄ App.tsx              # Composant principal
‚îÇ   ‚îú‚îÄ‚îÄ main.tsx             # Point d'entr√©e
‚îÇ   ‚îî‚îÄ‚îÄ index.css            # Styles globaux
‚îú‚îÄ‚îÄ supabase/
‚îÇ   ‚îú‚îÄ‚îÄ functions/           # Edge Functions
‚îÇ   ‚îú‚îÄ‚îÄ migrations/          # Migrations SQL
‚îÇ   ‚îî‚îÄ‚îÄ config.toml          # Configuration Supabase
‚îú‚îÄ‚îÄ vercel.json              # Configuration Vercel
‚îî‚îÄ‚îÄ *.sql                    # Scripts SQL</code></pre>

            <h3>3.2 Pages Principales</h3>
            <ol>
                <li><strong>Accueil</strong> (<code>/</code>) - Page d'accueil avec Hero, actualit√©s, statistiques</li>
                <li><strong>Actualit√©s</strong> (<code>/actualites</code>) - Liste et d√©tails des actualit√©s</li>
                <li><strong>Textes Juridiques</strong> (<code>/textes</code>) - Biblioth√®que de textes de loi</li>
                <li><strong>Services</strong> (<code>/services</code>) - Services juridiques offerts</li>
                <li><strong>Contentieux</strong> (<code>/contentieux</code>) - Gestion du contentieux</li>
                <li><strong>Demande d'Avis</strong> (<code>/demande-avis</code>) - Formulaire de demande</li>
                <li><strong>Mod√®les</strong> (<code>/modeles</code>) - T√©l√©chargement de formulaires</li>
                <li><strong>FAQ</strong> (<code>/faq</code>) - Questions fr√©quentes</li>
                <li><strong>Contact</strong> (<code>/contact</code>) - Formulaire de contact</li>
                <li><strong>Carri√®res</strong> (<code>/carrieres</code>) - Offres d'emploi</li>
                <li><strong>M√©dias</strong> (<code>/medias</code>) - Espace presse</li>
                <li><strong>Admin</strong> (<code>/admin</code>) - Panneau d'administration</li>
                <li><strong>Recherche</strong> (<code>/recherche</code>) - Moteur de recherche global</li>
            </ol>

            <h3>3.3 Fonctionnalit√©s Cl√©s</h3>
            
            <h4>Fonctionnalit√©s Publiques</h4>
            <ul>
                <li>Navigation multilingue (Fran√ßais, Arabe, Anglais)</li>
                <li>Moteur de recherche global</li>
                <li>Consultation des actualit√©s et textes juridiques</li>
                <li>T√©l√©chargement de documents et formulaires</li>
                <li>Demande d'avis juridique en ligne</li>
                <li>Candidature aux offres d'emploi</li>
                <li>Abonnement newsletter</li>
                <li>G√©olocalisation (Mapbox)</li>
                <li>Mode sombre/clair</li>
                <li>Responsive design</li>
            </ul>

            <h4>Fonctionnalit√©s Administrateur</h4>
            <ul>
                <li>Gestion du contenu (CRUD)</li>
                <li>Publication/d√©publication</li>
                <li>Gestion des utilisateurs</li>
                <li>Statistiques et analytics</li>
                <li>Gestion des demandes d'avis</li>
                <li>Mod√©ration des contacts</li>
                <li>Gestion des candidatures</li>
                <li>Configuration du site</li>
            </ul>
        </div>

        <div class="section">
            <h2>4. S√âCURIT√â</h2>
            
            <h3>4.1 Mesures Impl√©ment√©es</h3>
            <ul>
                <li><strong>Row Level Security (RLS)</strong> - S√©curit√© au niveau des lignes</li>
                <li><strong>Authentification s√©curis√©e</strong> - Via Supabase Auth</li>
                <li><strong>Validation des formulaires</strong> - Avec Zod</li>
                <li><strong>Sanitization HTML</strong> - Avec DOMPurify</li>
                <li><strong>HTTPS/SSL</strong> - Certificat automatique via Vercel</li>
                <li><strong>Variables d'environnement</strong> - Secrets Supabase</li>
                <li><strong>CORS</strong> - Configuration appropri√©e</li>
            </ul>

            <h3>4.2 R√¥les et Permissions</h3>
            <ul>
                <li><strong>Public</strong> - Lecture des contenus publi√©s</li>
                <li><strong>Admin</strong> - Gestion compl√®te du contenu et des utilisateurs</li>
                <li>Validation des emails pour admin initial</li>
            </ul>
        </div>

        <div class="section">
            <h2>5. PERFORMANCES</h2>
            
            <h3>5.1 Optimisations</h3>
            <ul>
                <li><strong>React Query</strong> - Mise en cache des requ√™tes</li>
                <li><strong>Code splitting</strong> - Chargement lazy des composants</li>
                <li><strong>Vite</strong> - Build ultra-rapide</li>
                <li><strong>Vercel Edge Network</strong> - CDN global</li>
                <li><strong>Optimisation images</strong> - Compression automatique</li>
                <li><strong>Prefetching</strong> - Pr√©chargement des routes</li>
            </ul>

            <h3>5.2 M√©triques</h3>
            <ul>
                <li>Temps de chargement initial: &lt; 3s</li>
                <li>First Contentful Paint: &lt; 1.5s</li>
                <li>Time to Interactive: &lt; 3.5s</li>
            </ul>
        </div>

        <div class="section">
            <h2>6. MAINTENANCE ET SUPPORT</h2>
            
            <h3>6.1 Logs et Monitoring</h3>
            <ul>
                <li><strong>Supabase Dashboard</strong> - Logs backend</li>
                <li><strong>Vercel Analytics</strong> - Analytics frontend</li>
                <li><strong>Edge Function Logs</strong> - Logs serverless</li>
            </ul>

            <h3>6.2 Backup</h3>
            <ul>
                <li>Base de donn√©es: Backup automatique quotidien (Supabase)</li>
                <li>Code source: GitHub (si connect√©)</li>
                <li>Historique des versions: Lovable version history</li>
            </ul>
        </div>

        <div class="section">
            <h2>7. D√âVELOPPEMENT</h2>
            
            <h3>7.1 Environnement Local</h3>
            <pre><code># Installation
npm install

# D√©veloppement
npm run dev

# Build production
npm run build

# Preview build
npm run preview</code></pre>

            <h3>7.2 Variables d'Environnement</h3>
            <pre><code>VITE_SUPABASE_URL=https://aupfurarzgbdocgtdomy.supabase.co
VITE_SUPABASE_PUBLISHABLE_KEY=[cl√© publique]
VITE_SUPABASE_PROJECT_ID=aupfurarzgbdocgtdomy</code></pre>

            <h3>7.3 Scripts SQL Disponibles</h3>
            <ul>
                <li><code>backend-setup.sql</code> - Configuration initiale</li>
                <li><code>EXECUTE_THIS_SCRIPT.sql</code> - Script principal</li>
                <li><code>fix_all_security_issues.sql</code> - Corrections s√©curit√©</li>
                <li><code>cleanup_*.sql</code> - Scripts de nettoyage</li>
                <li><code>create_*.sql</code> - Cr√©ation de tables</li>
                <li>Plusieurs autres scripts de maintenance</li>
            </ul>
        </div>

        <div class="section">
            <h2>8. SUPPORT TECHNIQUE</h2>
            
            <h3>8.1 Contacts</h3>
            <ul>
                <li><strong>√âquipe de d√©veloppement:</strong> Lovable AI</li>
                <li><strong>Email technique:</strong> bechirmc90@gmail.com</li>
                <li><strong>Backend:</strong> Supabase</li>
                <li><strong>H√©bergement:</strong> Vercel</li>
            </ul>

            <h3>8.2 Ressources</h3>
            <ul>
                <li>Documentation React: <a href="https://react.dev">https://react.dev</a></li>
                <li>Documentation Supabase: <a href="https://supabase.com/docs">https://supabase.com/docs</a></li>
                <li>Documentation Tailwind: <a href="https://tailwindcss.com">https://tailwindcss.com</a></li>
                <li>Documentation Vercel: <a href="https://vercel.com/docs">https://vercel.com/docs</a></li>
            </ul>
        </div>

        <div class="section">
            <h2>9. √âVOLUTIONS FUTURES</h2>
            
            <h3>9.1 Fonctionnalit√©s Planifi√©es</h3>
            <ul>
                <li>Notifications push</li>
                <li>Espace client personnalis√©</li>
                <li>Signature √©lectronique</li>
                <li>Chat en direct</li>
                <li>Application mobile (PWA)</li>
            </ul>

            <h3>9.2 Am√©liorations Techniques</h3>
            <ul>
                <li>Tests automatis√©s (Jest, Cypress)</li>
                <li>Monitoring avanc√© (Sentry)</li>
                <li>Cache Redis</li>
                <li>Optimisation SEO avanc√©e</li>
            </ul>
        </div>

        <div class="section">
            <h2>10. LICENCE ET PROPRI√âT√â</h2>
            <p><strong>Propri√©taire:</strong> Agence Judiciaire de l'√âtat du Tchad</p>
            <p><strong>D√©veloppement:</strong> Lovable AI Platform</p>
            <p><strong>Date de mise en production:</strong> 2025</p>
            <p><strong>Version:</strong> 1.0.0</p>
        </div>

        <div class="footer">
            <p><em>Document g√©n√©r√© le: 2025-10-22</em></p>
            <p><em>Derni√®re mise √† jour: 2025-10-22</em></p>
        </div>
    </div>

    <script>
        async function handlePrint() {
            const button = document.querySelector('.print-button');
            const buttonText = button.querySelector('.button-text');
            const originalText = buttonText.innerHTML;
            
            // Disable button and show loading
            button.disabled = true;
            buttonText.innerHTML = '‚è≥ Pr√©paration... <span class="loading-spinner"></span>';
            
            // Allow UI to update
            await new Promise(resolve => setTimeout(resolve, 100));
            
            // Use requestAnimationFrame to ensure smooth UI update
            requestAnimationFrame(() => {
                setTimeout(() => {
                    window.print();
                    
                    // Restore button state after print dialog
                    setTimeout(() => {
                        button.disabled = false;
                        buttonText.innerHTML = originalText;
                    }, 500);
                }, 50);
            });
        }

        // Handle print dialog close
        window.addEventListener('afterprint', function() {
            const button = document.querySelector('.print-button');
            const buttonText = button.querySelector('.button-text');
            button.disabled = false;
            buttonText.innerHTML = 'üìÑ T√©l√©charger en PDF';
        });
    </script>
</body>
</html>